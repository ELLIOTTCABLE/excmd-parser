<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lexer (excmd.Excmd.Lexer)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">excmd</a> &#x00BB; <a href="../index.html">Excmd</a> &#x00BB; Lexer</nav><h1>Module <code>Excmd.Lexer</code></h1></header><dl><dt class="spec type" id="type-buffer"><a href="#type-buffer" class="anchor"></a><code><span class="keyword">type </span>buffer</code></dt><dd><h2 id="types"><a href="#types" class="anchor"></a>Types</h2></dd></dl><dl><dt class="spec type" id="type-position"><a href="#type-position" class="anchor"></a><code><span class="keyword">type </span>position</code><code><span class="keyword"> = </span>Lexing.position</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-position.pos_fname" class="anchored"><td class="def field"><a href="#type-position.pos_fname" class="anchor"></a><code>pos_fname : string;</code></td></tr><tr id="type-position.pos_lnum" class="anchored"><td class="def field"><a href="#type-position.pos_lnum" class="anchor"></a><code>pos_lnum : int;</code></td></tr><tr id="type-position.pos_bol" class="anchored"><td class="def field"><a href="#type-position.pos_bol" class="anchor"></a><code>pos_bol : int;</code></td></tr><tr id="type-position.pos_cnum" class="anchored"><td class="def field"><a href="#type-position.pos_cnum" class="anchor"></a><code>pos_cnum : int;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-pp_position"><a href="#val-pp_position" class="anchor"></a><code><span class="keyword">val </span>pp_position : Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-position">position</a> <span>&#45;&gt;</span> Ppx_deriving_runtime.unit</code></dt><dt class="spec value" id="val-show_position"><a href="#val-show_position" class="anchor"></a><code><span class="keyword">val </span>show_position : <a href="index.html#type-position">position</a> <span>&#45;&gt;</span> Ppx_deriving_runtime.string</code></dt></dl><dl><dt class="spec type" id="type-located"><a href="#type-located" class="anchor"></a><code><span class="keyword">type </span>'a located</code><code><span class="keyword"> = </span><span class="type-var">'a</span><span class="keyword"> * </span><a href="index.html#type-position">position</a><span class="keyword"> * </span><a href="index.html#type-position">position</a></code></dt><dt class="spec type" id="type-gen"><a href="#type-gen" class="anchor"></a><code><span class="keyword">type </span>'a gen</code><code><span class="keyword"> = </span>unit <span>&#45;&gt;</span> <span class="type-var">'a</span> option</code></dt></dl><dl><dt class="spec exception" id="exception-LexError"><a href="#exception-LexError" class="anchor"></a><code><span class="keyword">exception </span></code><code><span class="exception">LexError</span><span class="keyword"> of </span><a href="index.html#type-position">position</a><span class="keyword"> * </span>string</code></dt></dl><dl><dt class="spec value" id="val-sedlex_of_buffer"><a href="#val-sedlex_of_buffer" class="anchor"></a><code><span class="keyword">val </span>sedlex_of_buffer : <a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> Sedlexing.lexbuf</code></dt><dd><h2 id="constructors"><a href="#constructors" class="anchor"></a>Constructors</h2></dd></dl><dl><dt class="spec value" id="val-buffer_of_sedlex"><a href="#val-buffer_of_sedlex" class="anchor"></a><code><span class="keyword">val </span>buffer_of_sedlex : Sedlexing.lexbuf <span>&#45;&gt;</span> <a href="index.html#type-buffer">buffer</a></code></dt><dt class="spec value" id="val-buffer_of_string"><a href="#val-buffer_of_string" class="anchor"></a><code><span class="keyword">val </span>buffer_of_string : string <span>&#45;&gt;</span> <a href="index.html#type-buffer">buffer</a></code></dt><dt class="spec value" id="val-token"><a href="#val-token" class="anchor"></a><code><span class="keyword">val </span>token : <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-located">located</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a></code></dt><dd><h2 id="accessors"><a href="#accessors" class="anchor"></a>Accessors</h2></dd></dl><dl><dt class="spec value" id="val-example_tokens"><a href="#val-example_tokens" class="anchor"></a><code><span class="keyword">val </span>example_tokens : <a href="../Tokens/index.html#type-token">Tokens.token</a> array</code></dt><dd><p>A static list of all tokens available at runtime, with arbitrary (but legal) payloads when appropriate.</p><p>(Necessary for the incremental parser.)</p></dd></dl><dl><dt class="spec value" id="val-compare_token"><a href="#val-compare_token" class="anchor"></a><code><span class="keyword">val </span>compare_token : <a href="../Tokens/index.html#type-token">Tokens.token</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-show_token"><a href="#val-show_token" class="anchor"></a><code><span class="keyword">val </span>show_token : <a href="../Tokens/index.html#type-token">Tokens.token</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>show_token tok</code> will provide an arbitrary, unique string-representation of that token, useful for debugging purposes. e.g. <code>show_token SEMICOLON</code> would return <code>&quot;SEMICOLON&quot;</code>.</p><p>For a more human-friendly version, see <a href="index.html#val-example_of_token"><code>example_of_token</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-example_of_token"><a href="#val-example_of_token" class="anchor"></a><code><span class="keyword">val </span>example_of_token : <a href="../Tokens/index.html#type-token">Tokens.token</a> <span>&#45;&gt;</span> string option</code></dt><dd><p><code>example_of_token tok</code> will provide an example string that, when consumed by the lexer (in, of course, an appropriate position), would produce the given token. e.g. <code>example_of_token FLAG_LONG</code> would produce <code>&quot;--flag&quot;</code>.</p><p>Notably, this *does not* produce a full, parseable input-fragment; simple an example of <em>one</em> token. e.g. <code>example_of_token COMMENT</code> produces <code>&quot;comment&quot;</code>, not <code>&quot;/* comment */&quot;</code>.</p></dd></dl><dl><dt class="spec value" id="val-token_is_erraneous"><a href="#val-token_is_erraneous" class="anchor"></a><code><span class="keyword">val </span>token_is_erraneous : <a href="../Tokens/index.html#type-token">Tokens.token</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>token_is_erraneous tok</code> indicates whether lexing should reasonably be expected to continue after reading <code>tok</code>.</p><p>This lexer will return tokens, instead of raising exceptions, for some common failure-states; this allows error-handling to be lifted into the parser, and more importantly, allows incremental recovery. In the parser itself, this is handled simply by not handling these erraneous tokens; if you're calling the lexer directly for any reason, you can use this function to ensure valid output.</p></dd></dl><dl><dt class="spec value" id="val-token_body"><a href="#val-token_body" class="anchor"></a><code><span class="keyword">val </span>token_body : <a href="../Tokens/index.html#type-token">Tokens.token</a> <span>&#45;&gt;</span> string option</code></dt><dd><p><code>token_body tok</code> produces <code>Some string_payload</code> if the token carries a body-payload, and <code>None</code> if that type of token has no payload (or in the case of errors - see <a href="index.html#val-token_is_erraneous"><code>token_is_erraneous</code></a>.) e.g. <code>token_body (IDENTIFIER &quot;hi&quot;)</code> yields <code>&quot;hi&quot;</code>.</p></dd></dl><dl><dt class="spec value" id="val-token_is_erraneous"><a href="#val-token_is_erraneous" class="anchor"></a><code><span class="keyword">val </span>token_is_erraneous : <a href="../Tokens/index.html#type-token">Tokens.token</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>token_is_erraneous tok</code> indicates whether lexing should reasonably be expected to continue after reading <code>tok</code>.</p><p>This lexer will return tokens, instead of raising exceptions, for some common failure-states; this allows error-handling to be lifted into the parser, and more importantly, allows incremental recovery. In the parser itself, this is handled simply by not handling these erraneous tokens; if you're calling the lexer directly for any reason, you can use this function to ensure valid output.</p></dd></dl><dl><dt class="spec value" id="val-token_error_message"><a href="#val-token_error_message" class="anchor"></a><code><span class="keyword">val </span>token_error_message : <a href="../Tokens/index.html#type-token">Tokens.token</a> <span>&#45;&gt;</span> string option</code></dt><dd><p><code>token_error_message tok</code> produces <code>Some message</code> if the token represents a lexing-error (see <a href="index.html#val-token_is_erraneous"><code>token_is_erraneous</code></a>), and <code>None</code> for all non-erraneous tokens.</p></dd></dl><dl><dt class="spec value" id="val-start_lnum"><a href="#val-start_lnum" class="anchor"></a><code><span class="keyword">val </span>start_lnum : <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-located">located</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-start_cnum"><a href="#val-start_cnum" class="anchor"></a><code><span class="keyword">val </span>start_cnum : <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-located">located</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-end_lnum"><a href="#val-end_lnum" class="anchor"></a><code><span class="keyword">val </span>end_lnum : <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-located">located</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-end_cnum"><a href="#val-end_cnum" class="anchor"></a><code><span class="keyword">val </span>end_cnum : <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-located">located</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-error_loc_exn"><a href="#val-error_loc_exn" class="anchor"></a><code><span class="keyword">val </span>error_loc_exn : exn <span>&#45;&gt;</span> <a href="index.html#type-position">position</a></code></dt><dt class="spec value" id="val-error_desc_exn"><a href="#val-error_desc_exn" class="anchor"></a><code><span class="keyword">val </span>error_desc_exn : exn <span>&#45;&gt;</span> string</code></dt></dl><section><header><h2 id="lexing-functions"><a href="#lexing-functions" class="anchor"></a>Lexing functions</h2></header><dl><dt class="spec value" id="val-next_loc"><a href="#val-next_loc" class="anchor"></a><code><span class="keyword">val </span>next_loc : <a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-located">located</a></code></dt><dt class="spec value" id="val-next_loc_exn"><a href="#val-next_loc_exn" class="anchor"></a><code><span class="keyword">val </span>next_loc_exn : <a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-located">located</a></code></dt><dt class="spec value" id="val-next"><a href="#val-next" class="anchor"></a><code><span class="keyword">val </span>next : <a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a></code></dt><dt class="spec value" id="val-next_exn"><a href="#val-next_exn" class="anchor"></a><code><span class="keyword">val </span>next_exn : <a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a></code></dt><dt class="spec value" id="val-gen_loc"><a href="#val-gen_loc" class="anchor"></a><code><span class="keyword">val </span>gen_loc : <a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-located">located</a> <a href="index.html#type-gen">gen</a></code></dt><dt class="spec value" id="val-gen_loc_exn"><a href="#val-gen_loc_exn" class="anchor"></a><code><span class="keyword">val </span>gen_loc_exn : <a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-located">located</a> <a href="index.html#type-gen">gen</a></code></dt><dt class="spec value" id="val-gen"><a href="#val-gen" class="anchor"></a><code><span class="keyword">val </span>gen : <a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-gen">gen</a></code></dt><dt class="spec value" id="val-gen_exn"><a href="#val-gen_exn" class="anchor"></a><code><span class="keyword">val </span>gen_exn : <a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-gen">gen</a></code></dt><dt class="spec value" id="val-tokens_loc"><a href="#val-tokens_loc" class="anchor"></a><code><span class="keyword">val </span>tokens_loc : <a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-located">located</a> array</code></dt><dt class="spec value" id="val-tokens_loc_exn"><a href="#val-tokens_loc_exn" class="anchor"></a><code><span class="keyword">val </span>tokens_loc_exn : <a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-located">located</a> array</code></dt><dt class="spec value" id="val-tokens"><a href="#val-tokens" class="anchor"></a><code><span class="keyword">val </span>tokens : <a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a> array</code></dt><dt class="spec value" id="val-tokens_exn"><a href="#val-tokens_exn" class="anchor"></a><code><span class="keyword">val </span>tokens_exn : <a href="index.html#type-buffer">buffer</a> <span>&#45;&gt;</span> <a href="../Tokens/index.html#type-token">Tokens.token</a> array</code></dt><dt class="spec value" id="val-show_loctoken"><a href="#val-show_loctoken" class="anchor"></a><code><span class="keyword">val </span>show_loctoken : <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-located">located</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>show_loctoken tok</code> displays the internal OCaml representation of the located token <code>tok</code>.</p></dd></dl><dl><dt class="spec value" id="val-string_of_loctoken"><a href="#val-string_of_loctoken" class="anchor"></a><code><span class="keyword">val </span>string_of_loctoken : <a href="../Tokens/index.html#type-token">Tokens.token</a> <a href="index.html#type-located">located</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>string_of_loctoken tok</code> displays a simple, human-readable representation of the located token <code>tok</code>.</p></dd></dl><dl><dt class="spec value" id="val-string_of_position"><a href="#val-string_of_position" class="anchor"></a><code><span class="keyword">val </span>string_of_position : <a href="index.html#type-position">position</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>string_of_position pos</code> displays a simple, human-readable representation of the individual position <code>pos</code>.</p></dd></dl></section></div></body></html>